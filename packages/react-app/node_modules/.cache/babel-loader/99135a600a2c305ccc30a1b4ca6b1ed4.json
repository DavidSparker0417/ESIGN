{"ast":null,"code":"import { utils } from 'ethers';\n/**\n * @internal Intended for internal use - use it on your own risk\n */\n\nexport function warnOnInvalidCall(call) {\n  if (!call) {\n    return;\n  }\n\n  const {\n    contract,\n    method,\n    args\n  } = call;\n  console.warn(`Invalid contract call: address=${contract.address} method=${method} args=${args}`);\n}\n/**\n * @internal Intended for internal use - use it on your own risk\n */\n\nexport function encodeCallData(call, chainId) {\n  if (!call) {\n    return undefined;\n  }\n\n  const {\n    contract,\n    method,\n    args\n  } = call;\n\n  if (!contract.address || !method) {\n    warnOnInvalidCall(call);\n    return undefined;\n  }\n\n  try {\n    return {\n      address: contract.address,\n      data: contract.interface.encodeFunctionData(method, args),\n      chainId\n    };\n  } catch (_a) {\n    warnOnInvalidCall(call);\n    return undefined;\n  }\n}\n/**\n * @internal Intended for internal use - use it on your own risk\n */\n\nexport function getUniqueCalls(requests) {\n  const unique = [];\n  const used = {};\n\n  for (const request of requests) {\n    if (!used[`${request.address.toLowerCase()}${request.data}${request.chainId}`]) {\n      unique.push(request);\n      used[`${request.address.toLowerCase()}${request.data}${request.chainId}`] = true;\n    }\n  }\n\n  return unique;\n}\n/**\n * @internal Intended for internal use - use it on your own risk\n */\n\nexport function decodeCallResult(call, result) {\n  if (!result || !call) {\n    return undefined;\n  }\n\n  const {\n    value,\n    success\n  } = result;\n\n  try {\n    if (success) {\n      return {\n        value: call.contract.interface.decodeFunctionResult(call.method, value),\n        error: undefined\n      };\n    } else {\n      const errorMessage = new utils.Interface(['function Error(string)']).decodeFunctionData('Error', value)[0];\n      return {\n        value: undefined,\n        error: new Error(errorMessage)\n      };\n    }\n  } catch (error) {\n    return {\n      value: undefined,\n      error: error\n    };\n  }\n}","map":{"version":3,"sources":["../../../../src/helpers/calls.ts"],"names":[],"mappings":"AAAA,SAAS,KAAT,QAAsB,QAAtB;AAKA;;AAEG;;AACH,OAAM,SAAU,iBAAV,CAA4B,IAA5B,EAA8C;EAClD,IAAI,CAAC,IAAL,EAAW;IACT;EACD;;EACD,MAAM;IAAE,QAAF;IAAY,MAAZ;IAAoB;EAApB,IAA6B,IAAnC;EACA,OAAO,CAAC,IAAR,CAAa,kCAAkC,QAAQ,CAAC,OAAO,WAAW,MAAM,SAAS,IAAI,EAA7F;AACD;AAED;;AAEG;;AACH,OAAM,SAAU,cAAV,CAAyB,IAAzB,EAA6C,OAA7C,EAA4D;EAChE,IAAI,CAAC,IAAL,EAAW;IACT,OAAO,SAAP;EACD;;EACD,MAAM;IAAE,QAAF;IAAY,MAAZ;IAAoB;EAApB,IAA6B,IAAnC;;EACA,IAAI,CAAC,QAAQ,CAAC,OAAV,IAAqB,CAAC,MAA1B,EAAkC;IAChC,iBAAiB,CAAC,IAAD,CAAjB;IACA,OAAO,SAAP;EACD;;EACD,IAAI;IACF,OAAO;MAAE,OAAO,EAAE,QAAQ,CAAC,OAApB;MAA6B,IAAI,EAAE,QAAQ,CAAC,SAAT,CAAmB,kBAAnB,CAAsC,MAAtC,EAA8C,IAA9C,CAAnC;MAAwF;IAAxF,CAAP;EACD,CAFD,CAEE,OAAA,EAAA,EAAM;IACN,iBAAiB,CAAC,IAAD,CAAjB;IACA,OAAO,SAAP;EACD;AACF;AAED;;AAEG;;AACH,OAAM,SAAU,cAAV,CAAyB,QAAzB,EAA4C;EAChD,MAAM,MAAM,GAAc,EAA1B;EACA,MAAM,IAAI,GAA4B,EAAtC;;EACA,KAAK,MAAM,OAAX,IAAsB,QAAtB,EAAgC;IAC9B,IAAI,CAAC,IAAI,CAAC,GAAG,OAAO,CAAC,OAAR,CAAgB,WAAhB,EAA6B,GAAG,OAAO,CAAC,IAAI,GAAG,OAAO,CAAC,OAAO,EAAlE,CAAT,EAAgF;MAC9E,MAAM,CAAC,IAAP,CAAY,OAAZ;MACA,IAAI,CAAC,GAAG,OAAO,CAAC,OAAR,CAAgB,WAAhB,EAA6B,GAAG,OAAO,CAAC,IAAI,GAAG,OAAO,CAAC,OAAO,EAAlE,CAAJ,GAA4E,IAA5E;IACD;EACF;;EACD,OAAO,MAAP;AACD;AAUD;;AAEG;;AACH,OAAM,SAAU,gBAAV,CACJ,IADI,EAEJ,MAFI,EAEiB;EAErB,IAAI,CAAC,MAAD,IAAW,CAAC,IAAhB,EAAsB;IACpB,OAAO,SAAP;EACD;;EACD,MAAM;IAAE,KAAF;IAAS;EAAT,IAAqB,MAA3B;;EACA,IAAI;IACF,IAAI,OAAJ,EAAa;MACX,OAAO;QACL,KAAK,EAAE,IAAI,CAAC,QAAL,CAAc,SAAd,CAAwB,oBAAxB,CAA6C,IAAI,CAAC,MAAlD,EAA0D,KAA1D,CADF;QAIL,KAAK,EAAE;MAJF,CAAP;IAMD,CAPD,MAOO;MACL,MAAM,YAAY,GAAW,IAAI,KAAK,CAAC,SAAV,CAAoB,CAAC,wBAAD,CAApB,EAAgD,kBAAhD,CAAmE,OAAnE,EAA4E,KAA5E,EAAmF,CAAnF,CAA7B;MACA,OAAO;QACL,KAAK,EAAE,SADF;QAEL,KAAK,EAAE,IAAI,KAAJ,CAAU,YAAV;MAFF,CAAP;IAID;EACF,CAfD,CAeE,OAAO,KAAP,EAAc;IACd,OAAO;MACL,KAAK,EAAE,SADF;MAEL,KAAK,EAAE;IAFF,CAAP;EAID;AACF","sourceRoot":"","sourcesContent":["import { utils } from 'ethers';\n/**\n * @internal Intended for internal use - use it on your own risk\n */\nexport function warnOnInvalidCall(call) {\n    if (!call) {\n        return;\n    }\n    const { contract, method, args } = call;\n    console.warn(`Invalid contract call: address=${contract.address} method=${method} args=${args}`);\n}\n/**\n * @internal Intended for internal use - use it on your own risk\n */\nexport function encodeCallData(call, chainId) {\n    if (!call) {\n        return undefined;\n    }\n    const { contract, method, args } = call;\n    if (!contract.address || !method) {\n        warnOnInvalidCall(call);\n        return undefined;\n    }\n    try {\n        return { address: contract.address, data: contract.interface.encodeFunctionData(method, args), chainId };\n    }\n    catch (_a) {\n        warnOnInvalidCall(call);\n        return undefined;\n    }\n}\n/**\n * @internal Intended for internal use - use it on your own risk\n */\nexport function getUniqueCalls(requests) {\n    const unique = [];\n    const used = {};\n    for (const request of requests) {\n        if (!used[`${request.address.toLowerCase()}${request.data}${request.chainId}`]) {\n            unique.push(request);\n            used[`${request.address.toLowerCase()}${request.data}${request.chainId}`] = true;\n        }\n    }\n    return unique;\n}\n/**\n * @internal Intended for internal use - use it on your own risk\n */\nexport function decodeCallResult(call, result) {\n    if (!result || !call) {\n        return undefined;\n    }\n    const { value, success } = result;\n    try {\n        if (success) {\n            return {\n                value: call.contract.interface.decodeFunctionResult(call.method, value),\n                error: undefined,\n            };\n        }\n        else {\n            const errorMessage = new utils.Interface(['function Error(string)']).decodeFunctionData('Error', value)[0];\n            return {\n                value: undefined,\n                error: new Error(errorMessage),\n            };\n        }\n    }\n    catch (error) {\n        return {\n            value: undefined,\n            error: error,\n        };\n    }\n}\n//# sourceMappingURL=calls.js.map"]},"metadata":{},"sourceType":"module"}